<html>
<head>
<meta charset="UTF-8">
<title> Contact Page</title>
<meta charset="utf-8">
<meta name=‘viewport’ content=“width=device-width, initial-scale=1”>
<meta name="keywords" content="contact">
<link href="styles.css" rel="stylesheet" type="text/css">
<style type="text/css">
  .errMsg {color: #D20E11; border: solid 1px #d20e11; display:none;  padding: 1px 15px;	}
  .online_form{
    display: inline-block;
    margin:2rem auto;
    margin-left:300px;
    border: 3px solid green;
    padding:2rem;
  }
  
  .heading{
    text-align: center;
    color:blue;
    font-size:20px;
    margin:2rem auto;
  }
  
#sendBtn{
  border:0;
  background:#343050;
  padding:0.5rem;
  color:white;
  text-align: center;
  margin: 1.5rem 0;
  transition:0.3s background ease;
}
  #sendBtn:hover{
    background:#3498DB;
  }
  
 .secondcolumn{
  display: inline-block !important;
  width:380px!important;
  padding-left: 4.5%!important;
}
  </style>
</head>

<body>
  <div class="header">
    <a href="index.html"><img src="greenname.png" alt="Logo" class="main-logo"></a>
 </div>

  <div class="navbar">
        <a class="nav" href="cakes.html"><img src="cake.png" alt="cake" class="nav-bar-icon"/> Cakes</a>
        <a class="nav" href="cupcakes.html"><img src="cupcake.png" alt="cupcake" class="nav-bar-icon"/> Cupcakes</a>
        <a class="nav" href="pies.html"><img src="pie.png" alt="pie" class="nav-bar-icon"/> Pies</a>
        <a class="nav" href="cookies.html"><img src="cookie.png" alt="cookie" class="nav-bar-icon"/> Cookies</a>
        <a class="nav" href="contact.html"><img src="contact.png" alt="contact" class="nav-bar-icon"/> Contact</a>
        <a class="nav" href="blog.html"><img src="blog2.png" alt="blog" class="nav-bar-icon"/> Blog</a>
  </div>
  
  <div class="promotional-banner">
    <div class="promo_row">
        <p><b>FREE SURPRISE CANDY SAMPLES!</b></p>
    </div>
      <div class="firstcolumn">
        <p>SPEND $50 & GET 3: <b>SWEET SURPRISE</b></p>
      </div>
      <div class="secondcolumn">
        <p>SPEND $100 & GET 8: <b>BONUS SURPRISE</b></p>
      </div>
  </div>
  
 <div class="page-title">
    <h1>Please place your order through this form!</h1>
  </div>
  
  <script language="javascript">

  function MenuItem(name, cost)
  {
  	this.name = name;
  	this.cost=cost;
  }

  cakeItems = new Array(
  	new MenuItem("Ultra Cream Cake", 40),
  	new MenuItem("Calamondin & Calamansi", 40),
  	new MenuItem("Framboise Cake", 45),
  	new MenuItem("Teatime & Life", 45),
  	new MenuItem("Blue Monday", 40),
    new MenuItem("Walnut & Tree", 50)
  );

  cupcakeItems = new Array(
  	new MenuItem("The UNICORN", 5),
  	new MenuItem("Salted Caramel", 5),
  	new MenuItem("Boston Cream", 6),
  	new MenuItem("Sprinkled Rose", 5),
  	new MenuItem("Lavendar Purple Twist", 6),
    new MenuItem("Pumpkin Spice", 8)
  );

  pieItems = new Array(
  	new MenuItem("Walnut Fantasy", 15),
  	new MenuItem("Citrus Cranberry", 15),
  	new MenuItem("Traditional Pumpkin", 20),
  	new MenuItem("Peanut Butter Caramel", 20),
  	new MenuItem("Vegan Apple", 15),
    new MenuItem("Lemon Cake Pie", 15)
  );

  cookiesItems = new Array(
    new MenuItem("Chocolate Chip", 2),
  	new MenuItem("Fudge Chocolate Chip", 1),
  	new MenuItem("Oatmeal Rasin", 2),
  	new MenuItem("M&M Sugar", 2),
  	new MenuItem("Double Peanut Butter", 1),
    new MenuItem("Almost Heaven", 2)
  );

  costs = new Array(
    "cakeprice", "cupcakeprice", "pieprice", "cookiesprice"
  );

  function makeSelectcookie(name, minRange, maxRange)
  {
  	var t= "";
  	t = "<select name='" + name + "' size='1'>";
  	for (j=minRange; j<=maxRange; j++)
  	   t += "<option>" + cookiesItems[j].name + "</option>";
  	t+= "</select>";
  	return t;
  }

  function makeSelectpie(name, minRange, maxRange)
  {
  	var t= "";
  	t = "<select name='" + name + "' size='1'>";
  	for (j=minRange; j<=maxRange; j++)
  	   t += "<option>" + pieItems[j].name + "</option>";
  	t+= "</select>";
  	return t;
  }

  function makeSelectcupcake(name, minRange, maxRange)
  {
  	var t= "";
  	t = "<select name='" + name + "' size='1'>";
  	for (j=minRange; j<=maxRange; j++)
  	   t += "<option>" + cupcakeItems[j].name + "</option>";
  	t+= "</select>";
  	return t;
  }

  function makeSelectcake(name, minRange, maxRange)
  {
  	var t= "";
  	t = "<select name='" + name + "' size='1'>";
  	for (j=minRange; j<=maxRange; j++)
  	   t += "<option>" + cakeItems[j].name + "</option>";
  	t+= "</select>";
  	return t;
  }

  function makeSelectquantity(name, minRange, maxRange)
  {
  	var t= "";
  	t = "<select name='" + name + "' size='1'>";
  	for (j=minRange; j<=maxRange; j++)
  	   t += "<option>" + j + "</option>";
  	t+= "</select>";
  	return t;
  }
  </script>
  <div class="online_form">
  <form name="order">

  <p>First Name: <input type="text"  name='fname' placeholder="Enter First Name" /></p>
  <p>Last Name*:  <input type="text"  name='lname' placeholder="Enter Last Name" />
  	<div id="errName" class="errMsg">Last Name is required.</div></p>
  <p>Street: <input type="text"  name='street' placeholder="Enter Street Address"/>
  	<div id="errStreet" class="errMsg">Street is required.</div></p>
  <p>City: <input type="text"  name='city' placeholder="City Location"/>
  	<div id="errCity" class="errMsg">City is required.</div></p>
  <p>Phone*: <input type="text"  name='phone' placeholder="(xxx)-xxx-xxxx" />
  	<div id="noPhone" class="errMsg">Phone is required.</div>
  	<div id="errPhone" class="errMsg">Phone entered is not valid.</div></p>
  <p>
  	<input type="radio"  name="p_or_d" value = "pickup" checked="checked"/>Pickup
  	<input type="radio"  name='p_or_d' value = 'delivery'/>Delivery
  </p>
  <table id="costTable" border="0" cellpadding="3">
    <tr>
      <th>Item Name</th>
      <th>Select Item</th>
      <th>Cost Each</th>
      <th>Total Cost</th>
    </tr>
  <script language="javascript">
    var s = "";
    for (i=0; i< 4; i++)
    {
  	  s += "<tr><td>";
      if (i == 0){
        s += makeSelectcake("cakeitems", 0, 5)  + "</td>";
      }else if (i == 1){
        s += makeSelectcupcake("cupcakeitems", 0, 5)  + "</td>";
      }else if (i == 2){
        s += makeSelectpie("pieitems", 0, 5)  + "</td>";
      }else if (i == 3){
        s += makeSelectcookie("cookieitems", 0, 5)  + "</td>";
      }
      s += "<td>" + makeSelectquantity("quan", 0, 10) + "</td>";
  	  s += "<td> $ <input type='text' name='" + costs[i] + "' readonly/></td>";
  	  s += "<td>$<input type='text' name='cost' readonly/></td></tr>";
    }
    document.writeln(s);
  </script>
  </table>
  <div id="noItem" class="errMsg">At least one item is required.</div>
  <p>Subtotal:
     $<input type="text"  name='subtotal' id="subtotal" readonly/>
  </p>
  <p>Mass tax 6.25%:
    $ <input type="text"  name='tax' id="tax" readonly/>
  </p>
  <p>Total: $ <input type="text"  name='total' id="total" readonly/>
  </p>

  <input type = "button" id="sendBtn" value = "Submit Order" onclick="validate()"/>
  </div>

  <script language ="javascript">
    document.getElementsByName("cakeprice")[0].value = 40;
    document.getElementsByName("cupcakeprice")[0].value = 5;
    document.getElementsByName("pieprice")[0].value = 15;
    document.getElementsByName("cookiesprice")[0].value = 2;

    var cake = document.getElementsByName("cakeitems")[0];
    var cupcake = document.getElementsByName("cupcakeitems")[0];
    var pie = document.getElementsByName("pieitems")[0];
    var cookie = document.getElementsByName("cookieitems")[0];

    cake.onchange = function(){
      var value = cakeItems[cake.selectedIndex].cost;
      document.getElementsByName("cakeprice")[0].value = parseInt(value);
    }
    cupcake.onchange = function(){
      var value = cupcakeItems[cupcake.selectedIndex].cost;
      document.getElementsByName("cupcakeprice")[0].value = parseInt(value);
    }
    pie.onchange = function(){
      var value = pieItems[pie.selectedIndex].cost;
      document.getElementsByName("pieprice")[0].value = parseInt(value);
    }
    cookie.onchange = function(){
      var value = cookiesItems[cookie.selectedIndex].cost;
      document.getElementsByName("cookiesprice")[0].value = parseInt(value);
    }

  	var e = document.getElementsByName("quan");
  	var output = document.getElementsByName("cost");
  	var s1 = document.getElementsByName("subtotal")[0];
  	var s2 = document.getElementsByName("tax")[0];
  	var s3 = document.getElementsByName("total")[0];
  	function updateSub(){
  		var raw_sub = 0;
  		raw_sub = (parseFloat(output[0].value) || 0) +
  							(parseFloat(output[1].value) || 0) +
  							(parseFloat(output[2].value) || 0) +
  							(parseFloat(output[3].value) || 0);
  		s1.value = raw_sub;
  		s2.value = (parseFloat(raw_sub) * 0.0625).toFixed(2);
  		s3.value = (parseFloat(s1.value) + parseFloat(s2.value)).toFixed(2);
  	}
  	e[0].onchange = function(){
  			var value = e[0].options[e[0].selectedIndex].value;
        var price = document.getElementsByName("cakeprice")[0].value;
  			output[0].value = (parseInt(value) * parseInt(price)).toFixed(2);
  			updateSub();
  	}
  	e[1].onchange = function(){
  			var value = e[1].options[e[1].selectedIndex].value;
        var price = document.getElementsByName("cupcakeprice")[0].value;
        output[1].value = (parseInt(value) * parseInt(price)).toFixed(2);
  			updateSub();
  	}
  	e[2].onchange = function(){
  			var value = e[2].options[e[2].selectedIndex].value;
        var price = document.getElementsByName("pieprice")[0].value;
  			output[2].value = (parseInt(value) * parseInt(price)).toFixed(2);
  			updateSub();
  	}
  	e[3].onchange = function(){
  			var value = e[3].options[e[3].selectedIndex].value;
        var price = document.getElementsByName("cookiesprice")[0].value;
  			output[3].value = (parseInt(value) * parseInt(price)).toFixed(2);
  			updateSub();
  	}
  	var radio = document.getElementsByName("p_or_d");
  	window.onload = function(){
  			if (radio[0].checked){
  				document.getElementsByTagName("p")[2].style.display = "none";
  				document.getElementsByTagName("p")[3].style.display = "none";
  			}
  	}
  	radio[0].onchange = function(){
  		document.getElementsByTagName("p")[2].style.display = "none";
  		document.getElementsByTagName("p")[3].style.display = "none";
  	}
  	radio[1].onchange = function(){
  		document.getElementsByTagName("p")[2].style.display = "";
  		document.getElementsByTagName("p")[3].style.display = "";
  	}

  	function validate(){
  		err=false;
  		document.getElementById("errName").style.display = "none";
  		document.getElementById("errStreet").style.display = "none";
  		document.getElementById("errCity").style.display = "none";
  		document.getElementById("noPhone").style.display = "none";
  		document.getElementById("errPhone").style.display = "none";
  		document.getElementById("noItem").style.display = "none";
  		with(document.order){
  			if (lname.value == ""){
  				document.getElementById("errName").style.display = "inline-block";
  				lname.focus();
  				err=true;
  			}
  			if (radio[1].checked){
  				if (street.value == ""){
  					document.getElementById("errStreet").style.display = "inline-block";
  					street.focus();
  					err=true;
  				}
  				if (city.value == ""){
  					document.getElementById("errCity").style.display = "inline-block";
  					city.focus();
  					err=true;
  				}
  			}
  			if (phone.value == ""){
  				document.getElementById("noPhone").style.display = "inline-block";
  				phone.focus();
  				err=true;
  			}else{
  				const regex = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
  				if (regex.test(document.order.phone.value)){
  				}else{
  					document.getElementById("errPhone").style.display = "inline-block";
  					phone.focus();
  					err=true;
  				}
  			}
  		}
  		if (document.getElementsByName("subtotal")[0].value == ""){
  				document.getElementById("noItem").style.display = "inline-block";
  				err=true;
  		}
  		if (err == false){
  			var Order = window.open("","_blank","width=300,height=300,scrollbars=1,resizable=1");
  			months=["Jan", "Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
  			var order = "<p>You ordered " + makeOrder();
  			d = new Date();
  			d.setMinutes(d.getMinutes() + (radio[0].checked ? 15:30));
  			month = months[d.getMonth()];
  			var extime = "<p>Your expected " + (radio[0].checked ? "pickup" : "delivery")
  			+  " time is " + d.getHours() + ":" +
  			(d.getMinutes() < 10 ? "0" + d.getMinutes() : d.getMinutes()) + " " + month +
  			 " " + d.getDate() + " " + d.getFullYear() + "</p>";
  			var detail = "<p>The total amount of your order is $" + s3.value + "</p>";
  			Order.document.write("<h2>Thank you for placing your order with us!</h2>")
  			Order.document.write(order + extime + detail);
  			Order.document.close();
  		}
  		return !err;
  	}

  	function makeOrder(){
  		var t = "";
  		if (parseInt(output[0].value) > 0){
  				t += e[0].options[e[0].selectedIndex].value;
  				t += " " + cakeItems[cake.selectedIndex].name;
  		}
  		if (parseInt(output[1].value) > 0){
  				t += ", " + e[1].options[e[1].selectedIndex].value;
  				t += " " + cupcakeItems[cupcake.selectedIndex].name;
  		}
  		if (parseInt(output[2].value) > 0){
  				t += ", " + e[2].options[e[2].selectedIndex].value;
  				t += " " + pieItems[pie.selectedIndex].name;
  		}
  		if (parseInt(output[3].value) > 0){
  				t += ", " + e[3].options[e[3].selectedIndex].value;
  				t += " " + cookiesItems[cookie.selectedIndex].name;
  		}
  		t += ".</p>";
  		return t;
  	}
  </script>


  <footer class="footer">
  <br>
  <p><b>The Slice</b></p>
  <p>Harvard Square</p>
  <p>3 Brattle Street</P>
  <p>Cambridge, MA 02138</p><br>
  <a href="tel:8573218430">(857)-321-8430</a><br>
  <a href= "mailto:info@theslice.com">info@theslice.com</a>
</footer>

</body>
</html>
